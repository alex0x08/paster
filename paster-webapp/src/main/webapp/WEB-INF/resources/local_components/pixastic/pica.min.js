/* pica 2.0.8 nodeca/pica */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.pica=t()}}(function(){return function t(e,r,n){function i(o,u){if(!r[o]){if(!e[o]){var s="function"==typeof require&&require;if(!u&&s)return s(o,!0);if(a)return a(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var f=r[o]={exports:{}};e[o][0].call(f.exports,function(t){var r=e[o][1][t];return i(r?r:t)},f,f.exports,t,e,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,e,r){"use strict";e.exports=function(){return document.createElement("canvas")}},{}],2:[function(t,e,r){"use strict";var n=1;e.exports=function(){return n++}},{}],3:[function(t,e,r){"use strict";function n(t){this.create=t,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0}var i=2e3,a=500;n.prototype.acquire=function(){var t,e=this;return 0!==this.available.length?t=this.available.pop():(t=this.create(),t.id=this.lastId++,t.release=function(){e.release(t)}),this.acquired[t.id]=t,t},n.prototype.release=function(t){delete this.acquired[t.id],t.lastUsed=Date.now(),this.available.push(t),0===this.timeoutId&&(this.timeoutId=setTimeout(this.gc.bind(this),a))},n.prototype.gc=function(){var t=Date.now();this.available=this.available.filter(function(e){return!(t-e.lastUsed>i)||(e.destroy(),!1)}),0!==this.available.length?this.timeoutId=setTimeout(this.gc.bind(this),a):this.timeoutId=0},e.exports=n},{}],4:[function(t,e,r){"use strict";function n(t){return t<0?0:t>255?255:t}function i(t){return Math.round(t*((1<<f)-1))}function a(t,e,r,n,a){var o,u,s,h,f,c,l,g,p,v,m,w,E,b,T,_,R,y=d[t].filter,x=1/n,A=Math.min(1,n),M=d[t].win/A,j=Math.floor(2*(M+1)),U=new Int16Array((j+2)*r),I=0;for(o=0;o<r;o++){for(u=(o+.5)*x+a,s=Math.max(0,Math.floor(u-M)),h=Math.min(e-1,Math.ceil(u+M)),f=h-s+1,c=new Float32Array(f),l=new Int16Array(f),g=0,p=s,v=0;p<=h;p++,v++)m=y((p+.5-u)*A),g+=m,c[v]=m;for(w=0,v=0;v<c.length;v++)E=c[v]/g,w+=E,l[v]=i(E);for(l[r>>1]+=i(1-w),b=0;b<l.length&&0===l[b];)b++;if(b<l.length){for(T=l.length-1;T>0&&0===l[T];)T--;_=s+b,R=T-b+1,U[I++]=_,U[I++]=R,U.set(l.subarray(b,T+1),I),I+=R}else U[I++]=0,U[I++]=0}return U}function o(t,e,r,i,a,o){var u,s,h,f,d,c,l,g,p,v,m,w=0,E=0;for(p=0;p<i;p++){for(d=0,v=0;v<a;v++){for(c=o[d++],l=o[d++],g=w+4*c|0,u=s=h=f=0;l>0;l--)m=o[d++],f=f+m*t[g+3]|0,h=h+m*t[g+2]|0,s=s+m*t[g+1]|0,u=u+m*t[g]|0,g=g+4|0;e[E+3]=n(f+8192>>14),e[E+2]=n(h+8192>>14),e[E+1]=n(s+8192>>14),e[E]=n(u+8192>>14),E=E+4*i|0}E=4*(p+1)|0,w=(p+1)*r*4|0}}function u(t,e,r,i,a,o){var u,s,h,f,d,c,l,g,p,v,m,w=0,E=0;for(p=0;p<i;p++){for(d=0,v=0;v<a;v++){for(c=o[d++],l=o[d++],g=w+4*c|0,u=s=h=f=0;l>0;l--)m=o[d++],f=f+m*t[g+3]|0,h=h+m*t[g+2]|0,s=s+m*t[g+1]|0,u=u+m*t[g]|0,g=g+4|0;e[E+3]=n(f+8192>>14),e[E+2]=n(h+8192>>14),e[E+1]=n(s+8192>>14),e[E]=n(u+8192>>14),E=E+4*i|0}E=4*(p+1)|0,w=(p+1)*r*4|0}}function s(t,e,r){for(var n=3,i=e*r*4|0;n<i;)t[n]=255,n=n+4|0}function h(t){var e=t.src,r=t.width,n=t.height,i=t.toWidth,h=t.toHeight,f=t.scaleX||t.toWidth/t.width,d=t.scaleY||t.toHeight/t.height,c=t.offsetX||0,l=t.offsetY||0,g=t.dest||new Uint8Array(i*h*4),p="undefined"==typeof t.quality?3:t.quality,v=t.alpha||!1;if(r<1||n<1||i<1||h<1)return[];var m=a(p,r,i,f,c),w=a(p,n,h,d,l),E=new Uint8Array(i*n*4);return o(e,E,r,n,i,m),u(E,g,n,i,h,w),v||s(g,i,h),g}var f=14,d=[{win:.5,filter:function(t){return t>=-.5&&t<.5?1:0}},{win:1,filter:function(t){if(t<=-1||t>=1)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*(.54+.46*Math.cos(e/1))}},{win:2,filter:function(t){if(t<=-2||t>=2)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/2)/(e/2)}},{win:3,filter:function(t){if(t<=-3||t>=3)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/3)/(e/3)}}];e.exports=h},{}],5:[function(t,e,r){"use strict";function n(t,e,r){for(var n,i,a,o,u,s=e*r,h=new Uint16Array(s),f=0;f<s;f++)n=t[4*f],i=t[4*f+1],a=t[4*f+2],u=n>=i&&n>=a?n:i>=a&&i>=n?i:a,o=n<=i&&n<=a?n:i<=a&&i<=n?i:a,h[f]=257*(u+o)>>1;return h}function i(t,e,r,i,o,u){var s,h,f,d,c,l,g,p,v,m,w,E,b;if(!(0===i||o<.5)){o>2&&(o=2);var T=n(t,e,r),_=new Uint16Array(T);a(_,e,r,o);for(var R=i/100*4096+.5|0,y=257*u|0,x=e*r,A=0;A<x;A++)E=2*(T[A]-_[A]),Math.abs(E)>=y&&(b=4*A,s=t[b],h=t[b+1],f=t[b+2],p=s>=h&&s>=f?s:h>=s&&h>=f?h:f,g=s<=h&&s<=f?s:h<=s&&h<=f?h:f,l=257*(p+g)>>1,g===p?d=c=0:(c=l<=32767?4095*(p-g)/(p+g)|0:4095*(p-g)/(510-p-g)|0,d=s===p?65535*(h-f)/(6*(p-g))|0:h===p?21845+(65535*(f-s)/(6*(p-g))|0):43690+(65535*(s-h)/(6*(p-g))|0)),l+=R*E+2048>>12,l>65535?l=65535:l<0&&(l=0),0===c?s=h=f=l>>8:(m=l<=32767?l*(4096+c)+2048>>12:l+((65535-l)*c+2048>>12),v=2*l-m>>8,m>>=8,w=d+21845&65535,s=w>=43690?v:w>=32767?v+(6*(m-v)*(43690-w)+32768>>16):w>=10922?m:v+(6*(m-v)*w+32768>>16),w=65535&d,h=w>=43690?v:w>=32767?v+(6*(m-v)*(43690-w)+32768>>16):w>=10922?m:v+(6*(m-v)*w+32768>>16),w=d-21845&65535,f=w>=43690?v:w>=32767?v+(6*(m-v)*(43690-w)+32768>>16):w>=10922?m:v+(6*(m-v)*w+32768>>16)),t[b]=s,t[b+1]=h,t[b+2]=f)}}var a=t("glur/mono16");e.exports=i,e.exports.lightness=n},{"glur/mono16":11}],6:[function(t,e,r){"use strict";function n(t){var e=Math.round(t);return Math.abs(t-e)<a?e:Math.floor(t)}function i(t){var e=Math.round(t);return Math.abs(t-e)<a?e:Math.ceil(t)}var a=1e-5;e.exports.createRegions=function(t){var e,r,a,o,u,s,h,f=t.toWidth/t.width,d=t.toHeight/t.height,c=n(t.srcTileSize*f)-2*t.destTileBorder,l=n(t.srcTileSize*d)-2*t.destTileBorder,g=[];for(o=0;o<t.toHeight;o+=l)for(a=0;a<t.toWidth;a+=c)e=a-t.destTileBorder,e<0&&(e=0),u=a+c+t.destTileBorder-e,e+u>=t.toWidth&&(u=t.toWidth-e),r=o-t.destTileBorder,r<0&&(r=0),s=o+l+t.destTileBorder-r,r+s>=t.toHeight&&(s=t.toHeight-r),h={toX:e,toY:r,toWidth:u,toHeight:s,toInnerX:a,toInnerY:o,toInnerWidth:c,toInnerHeight:l,offsetX:e/f-n(e/f),offsetY:r/d-n(r/d),scaleX:f,scaleY:d,x:n(e/f),y:n(r/d),width:i(u/f),height:i(s/d)},g.push(h);return g},e.exports.eachLimit=function(t,e,r,n){function i(e){if(!u){if(e)return u=!0,void n(e);o++,o===t.length?n():a<t.length&&r(t[a++],i)}}0===t.length&&n();for(var a=0,o=0,u=!1;a<e&&a<t.length;)r(t[a++],i)}},{}],7:[function(t,e,r){"use strict";e.exports=function(e){var r=t("./resize_array"),n=t("./unsharp");e.onmessage=function(t){var i=t.data;i.dest=new Uint8Array(i.toWidth*i.toHeight*4),r(i),i.unsharpAmount&&n(i.dest,i.toWidth,i.toHeight,i.unsharpAmount,i.unsharpRadius,i.unsharpThreshold),e.postMessage({output:i.dest},[i.dest.buffer])}}},{"./resize_array":4,"./unsharp":5}],8:[function(t,e,r){"use strict";function n(t,e,r,n){var c=e.getContext("2d",{alpha:Boolean(r.alpha)}),l=h();l.width=Math.min(f,t.width),l.height=Math.min(f,t.height);var g=l.getContext("2d",{alpha:Boolean(r.alpha)});g.globalCompositeOperation="copy";var p=o({width:t.naturalWidth||t.width,height:t.naturalHeight||t.height,srcTileSize:f,toWidth:e.width,toHeight:e.height,destTileBorder:Math.ceil(Math.max(d,2.5*r.unsharpRadius|0))});return u(p,1,function(e,n){g.drawImage(t,e.x,e.y,e.width,e.height,0,0,e.width,e.height);var o=g.getImageData(0,0,e.width,e.height),u=c.createImageData(e.toWidth,e.toHeight),s={src:o.data,dest:u.data,width:e.width,height:e.height,toWidth:e.toWidth,toHeight:e.toHeight,scaleX:e.scaleX,scaleY:e.scaleY,offsetX:e.offsetX,offsetY:e.offsetY,quality:r.quality,alpha:r.alpha,unsharpAmount:r.unsharpAmount,unsharpRadius:r.unsharpRadius,unsharpThreshold:r.unsharpThreshold};i(s),r.unsharpAmount&&a(s.dest,s.toWidth,s.toHeight,s.unsharpAmount,s.unsharpRadius,s.unsharpThreshold),c.putImageData(u,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth,e.toInnerHeight),n()},n),s()}var i=t("./js/resize_array"),a=t("./js/unsharp"),o=t("./js/utils").createRegions,u=t("./js/utils").eachLimit,s=t("./js/generate_id"),h=t("./js/create_canvas"),f=1024,d=3;e.exports=n,e.exports.terminate=function(){}},{"./js/create_canvas":1,"./js/generate_id":2,"./js/resize_array":4,"./js/unsharp":5,"./js/utils":6}],9:[function(t,e,r){"use strict";function n(t,e,r,n){var i=e.getContext("2d",{alpha:Boolean(r.alpha)}),a=f();a.width=Math.min(c,t.naturalWidth||t.width),a.height=Math.min(c,t.naturalHeight||t.height);var o=a.getContext("2d",{alpha:Boolean(r.alpha)});o.globalCompositeOperation="copy";var d=u({width:t.naturalWidth||t.width,height:t.naturalHeight||t.height,srcTileSize:c,toWidth:e.width,toHeight:e.height,destTileBorder:Math.ceil(Math.max(l,2.5*r.unsharpRadius|0))}),m=1;"undefined"!=typeof navigator&&(m=navigator.hardwareConcurrency||1);var w=r._id||h();return v[w]=!0,s(d,m,function(e,n){o.drawImage(t,e.x,e.y,e.width,e.height,0,0,e.width,e.height);var a=o.getImageData(0,0,e.width,e.height),u={src:a.data,width:e.width,height:e.height,toWidth:e.toWidth,toHeight:e.toHeight,scaleX:e.scaleX,scaleY:e.scaleY,offsetX:e.offsetX,offsetY:e.offsetY,quality:r.quality,alpha:r.alpha,unsharpAmount:r.unsharpAmount,unsharpRadius:r.unsharpRadius,unsharpThreshold:r.unsharpThreshold},s=p.acquire();s.value.onmessage=function(t){var r,a,o,u,h;if(s.release(),!v[w])return void n(!0);if(t.data.err)return void n(t.data.err);if(o=i.createImageData(e.toWidth,e.toHeight),u=t.data.output,h=o.data,h.set)h.set(u);else for(r=0,a=u.length;r<a;r++)h[r]=u[r];g?i.putImageData(o,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth+1e-5,e.toInnerHeight+1e-5):i.putImageData(o,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth,e.toInnerHeight),n()},s.value.postMessage(u,[u.src.buffer])},function(t){v[w]&&(delete v[w],n(t))}),w}function i(t){v[t]&&delete v[t]}var a=t("webworkify"),o=t("./js/worker.js"),u=t("./js/utils").createRegions,s=t("./js/utils").eachLimit,h=t("./js/generate_id"),f=t("./js/create_canvas"),d=t("./js/pool"),c=1024,l=3,g=!1;try{g=navigator.userAgent.indexOf("Safari")!==-1}catch(t){}var p=new d(function(){return{value:a(o),destroy:function(){if(this.value.terminate(),"undefined"!=typeof window){var t=window.URL||window.webkitURL||window.mozURL||window.msURL;t&&t.revokeObjectURL&&this.value.objectURL&&t.revokeObjectURL(this.value.objectURL)}}}}),v={};e.exports=n,e.exports.terminate=i},{"./js/create_canvas":1,"./js/generate_id":2,"./js/pool":3,"./js/utils":6,"./js/worker.js":7,webworkify:13}],10:[function(t,e,r){"use strict";function n(t){try{(window.console.error||window.console.log).call(window.console,t)}catch(t){}}function i(t){var e=t.getError();if(e!==t.NO_ERROR)throw new Error("gl error "+e)}function a(t){return t.getContext("webgl")||t.getContext("experimental-webgl")}function o(t,e,r){var i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(n("Shader compile error: "+t.getShaderInfoLog(i)+". Source: `"+r+"`"),t.deleteShader(i),null)}function u(t,e,r){var a=t.createProgram();return t.attachShader(a,e),t.attachShader(a,r),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||(n("Program linking error: "+t.getProgramInfoLog(a)),t.deleteProgram(a)),i(t),a}function s(t,e,r,n,a){var o=t.getAttribLocation(e,r);t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW),t.enableVertexAttribArray(o),t.vertexAttribPointer(o,a.elementSize,t.FLOAT,!1,0,0),i(t)}function h(t,e,r,n){var i=t.getUniformLocation(e,r);t.uniform1i(i,n)}function f(t,e,r,n,i){var a=t.getUniformLocation(e,r);t.uniform2f(a,n,i)}function d(t,e,r){var n=t.createTexture();return t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),i(t),n}function c(t,e,r,n){var a=t.createTexture();return t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,a),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r,n,0,t.RGBA,t.UNSIGNED_BYTE,null),i(t),a}function l(t,e,r,n){var a=c(t,e,r,n),o=t.getParameter(t.FRAMEBUFFER_BINDING),u=t.createFramebuffer();return t.bindFramebuffer(t.FRAMEBUFFER,u),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,a,0),i(t),{fbo:u,texture:a,oldFbo:o}}function g(t,e,r,n){var i=t,a=t+r,o=e,u=e+n;return[i,o,a,o,i,u,i,u,a,o,a,u]}function p(t){function e(t){return t.toFixed(20)}for(var r=T["#fsh-lanczos1d-optimized-tpl"],n=t.direction,i=t.texW/t.destW,a=t.texH/t.destH,o="horizontal"===n?i:a,u=3,s=_[u].filter,h=_[u].win,f="horizontal"===n,d=1/t.texW,c=1/t.texH,l=f?d:c,g=2*Math.ceil(h*o),p="float total = 0.0;\ngl_FragColor = vec4(0.0);\n",v=0;v<g+1;v++){var m=v-g/2,w=m/o,E=s(w),b=l*m,R=f?b:0,y=f?0:b;p+="addPoint(vec2("+e(R)+", "+e(y)+"), "+e(E)+", total);\n"}p+="gl_FragColor /= vec4(total);";var x=r.replace("__CODE__",p);return x}function v(t,e){var r=o(t,t.VERTEX_SHADER,T["#vsh-basic"]),n=o(t,t.FRAGMENT_SHADER,p(e));return u(t,r,n)}function m(t,e,r,n,a,o,u,d,c){var p={direction:o,texW:r,texH:n,destW:u,destH:d},m=v(t,p);t.useProgram(m),h(t,m,"u_image",e),f(t,m,"u_resolution",u,d),s(t,m,"a_texCoord",[0,0,1,0,0,1,0,1,1,0,1,1],{elementSize:2}),s(t,m,"a_position",c?g(0,d,u,-d):g(0,0,u,d),{elementSize:2}),t.viewport(0,0,u,d);var w=l(t,a,u,d);return t.viewport(0,0,u,d),t.drawArrays(t.TRIANGLES,0,6),t.bindFramebuffer(t.FRAMEBUFFER,w.oldFbo),i(t),w}function w(t,e,r){var n=t.naturalWidth||t.width,i=t.naturalHeight||t.height,a=e.canvas.width,o=e.canvas.height,u=0,s=1,h=2;d(e,u,t),m(e,u,n,i,s,"horizontal",a,i,!1);var f=m(e,s,a,i,h,"vertical",a,o,!0);e.flush();var c=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,c),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,f.texture,0);var l=e.checkFramebufferStatus(e.FRAMEBUFFER);if(l!==e.FRAMEBUFFER_COMPLETE)throw new Error("Bad framebuffer status: "+l);r.alpha||(e.clearColor(1,1,1,1),e.colorMask(!1,!1,!1,!0),e.clear(e.COLOR_BUFFER_BIT));var g=new Uint8Array(a*o*4);e.readPixels(0,0,a,o,e.RGBA,e.UNSIGNED_BYTE,g);var p="undefined"==typeof r.unsharpAmount?0:0|r.unsharpAmount,v="undefined"==typeof r.unsharpRadius?0:r.unsharpRadius,w="undefined"==typeof r.unsharpThreshold?0:0|r.unsharpThreshold;return p&&E(g,a,o,p,v,w),g}var E=t("./js/unsharp"),b=t("./js/generate_id"),T={};T["#vsh-basic"]="precision highp float;\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform vec2 u_resolution;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n   vec2 clipSpace = a_position / u_resolution * 2.0 - 1.0;\n\n   gl_Position = vec4(clipSpace, 0, 1);\n   v_texCoord = a_texCoord;\n}\n",T["#fsh-lanczos1d-optimized-tpl"]="precision highp float;\n\nvarying vec2 v_texCoord;\n\nuniform sampler2D u_image;\n\n#define addPoint(offset, kv, total)   {vec2 pos = v_texCoord + offset; gl_FragColor += texture2D(u_image, pos) * kv; total += kv; }\n\nvoid main()\n{\n__CODE__\n}\n";var _=[{win:.5,filter:function(t){return t>=-.5&&t<.5?1:0}},{win:1,filter:function(t){if(t<=-1||t>=1)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*(.54+.46*Math.cos(e/1))}},{win:2,filter:function(t){if(t<=-2||t>=2)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/2)/(e/2)}},{win:3,filter:function(t){if(t<=-3||t>=3)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/3)/(e/3)}}];e.exports=function(t,e,r,i){var o,u;try{u=document.createElement("canvas"),u.id="pica-webgl-temporarry-canvas",u.height=e.height,u.width=e.width,document.body.appendChild(u),o=a(u);var s=w(t,o,r);o.finish(),document.body.removeChild(u);var h=e.getContext("2d"),f=h.createImageData(e.width,e.height);f.data.set(s),h.putImageData(f,0,0),i(null,s)}catch(t){n(t),o.finish(),document.body.removeChild(u),i(t)}return b()},e.exports.terminate=function(){}},{"./js/generate_id":2,"./js/unsharp":5}],11:[function(t,e,r){function n(t){t<.5&&(t=.5);var e=Math.exp(.527076)/t,r=Math.exp(-e),n=Math.exp(-2*e),i=(1-r)*(1-r)/(1+2*e*r-n);return o=i,u=i*(e-1)*r,s=i*(e+1)*r,h=-i*n,f=2*r,d=-n,c=(o+u)/(1-f-d),l=(s+h)/(1-f-d),new Float32Array([o,u,s,h,f,d,c,l])}function i(t,e,r,n,i,a){var o,u,s,h,f,d,c,l,g,p,v,m,w,E;for(g=0;g<a;g++){for(d=g*i,c=g,l=0,o=t[d],f=o*n[6],h=f,v=n[0],m=n[1],w=n[4],E=n[5],p=0;p<i;p++)u=t[d],s=u*v+o*m+h*w+f*E,f=h,h=s,o=u,r[l]=h,l++,d++;for(d--,l--,c+=a*(i-1),o=t[d],f=o*n[7],h=f,u=o,v=n[2],m=n[3],p=i-1;p>=0;p--)s=u*v+o*m+h*w+f*E,f=h,h=s,o=u,u=t[d],e[c]=r[l]+h,d--,l--,c-=a}}function a(t,e,r,a){if(a){var o=new Uint16Array(t.length),u=new Float32Array(Math.max(e,r)),s=n(a);i(t,o,u,s,e,r,a),i(o,t,u,s,r,e,a)}}var o,u,s,h,f,d,c,l;e.exports=a},{}],12:[function(t,e,r){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function i(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==n.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}var a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=i()?Object.assign:function(t,e){for(var r,i,u=n(t),s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var h in r)a.call(r,h)&&(u[h]=r[h]);if(Object.getOwnPropertySymbols){i=Object.getOwnPropertySymbols(r);for(var f=0;f<i.length;f++)o.call(r,i[f])&&(u[i[f]]=r[i[f]])}}return u}},{}],13:[function(t,e,r){var n=arguments[3],i=arguments[4],a=arguments[5],o=JSON.stringify;e.exports=function(t,e){function r(t){v[t]=!0;for(var e in i[t][1]){var n=i[t][1][e];v[n]||r(n)}}for(var u,s=Object.keys(a),h=0,f=s.length;h<f;h++){var d=s[h],c=a[d].exports;if(c===t||c&&c.default===t){u=d;break}}if(!u){u=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var l={},h=0,f=s.length;h<f;h++){var d=s[h];l[d]=d}i[u]=[Function(["require","module","exports"],"("+t+")(self)"),l]}var g=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[u]=u,i[g]=[Function(["require"],"var f = require("+o(u)+");(f.default ? f.default : f)(self);"),p];var v={};r(g);var m="("+n+")({"+Object.keys(v).map(function(t){return o(t)+":["+i[t][0]+","+o(i[t][1])+"]"}).join(",")+"},{},["+o(g)+"])",w=window.URL||window.webkitURL||window.mozURL||window.msURL,E=new Blob([m],{type:"text/javascript"});if(e&&e.bare)return E;var b=w.createObjectURL(E),T=new Worker(b);return T.objectURL=b,T}},{}],"/":[function(t,e,r){"use strict";function n(t){return Object.prototype.toString.call(t)}function i(t){return"[object Function]"===n(t)}function a(t,e,n,o){if(i(n)&&(o=n,n={}),isNaN(n)||(n={quality:n,alpha:!1}),d||(r.WEBGL=!1),d&&r.WEBGL){r.debug("Resize canvas with WebGL");var u=g(t,e,n,function(i){i?(r.debug("WebGL resize failed, do fallback and cancel next attempts"),r.debug(i),d=!1,a(t,e,m({},n,{_id:u}),o)):o()});return u}return s||(r.WW=!1),s&&r.WW?(r.debug("Resize buffer in WebWorker"),l(t,e,n,o)):(r.debug("Resize buffer sync (freeze event loop)"),c(t,e,n,o))}function o(t,e){var r={src:t.src,dest:t.dest,width:0|t.width,height:0|t.height,toWidth:0|t.toWidth,toHeight:0|t.toHeight,quality:t.quality,alpha:t.alpha,unsharpAmount:t.unsharpAmount,unsharpRadius:t.unsharpRadius,unsharpThreshold:t.unsharpThreshold};r.dest=p(r),r.unsharpAmount&&v(r.dest,r.toWidth,r.toHeight,r.unsharpAmount,r.unsharpRadius,r.unsharpThreshold),e(null,r.dest)}function u(t){c.terminate(t),l.terminate(t),g.terminate(t)}var s="undefined"!=typeof window&&"Worker"in window;if(s)try{var h=t("webworkify")(function(){});h.terminate()}catch(t){s=!1}var f,d=!1;try{"undefined"!=typeof document&&"undefined"!=typeof window&&window.WebGLRenderingContext&&(f=document.createElement("canvas"),(f.getContext("webgl")||f.getContext("experimental-webgl"))&&(d=!0))}catch(t){}finally{f=null}var c=t("./lib/resize_js"),l=t("./lib/resize_js_ww"),g=t("./lib/resize_webgl"),p=t("./lib/js/resize_array"),v=t("./lib/js/unsharp"),m=t("object-assign");r.resizeCanvas=a,r.resizeBuffer=o,r.terminate=u,r.WW=s,r.WEBGL=!1,r.debug=function(){}},{"./lib/js/resize_array":4,"./lib/js/unsharp":5,"./lib/resize_js":8,"./lib/resize_js_ww":9,"./lib/resize_webgl":10,"object-assign":12,webworkify:13}]},{},[])("/")});
